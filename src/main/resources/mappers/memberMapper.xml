<?xml version="1.0" encoding="UTF-8"?>
<!-- memberMapper.xml -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.eatit.mapper.MemberMapper">
  
  <!-- 로그인 -->
  <select id="LoginMember" resultType="MemberVO">
  	select * from member 
  	where id=#{id}
  </select>
  
  
  <!-- 회원가입 -->
  <insert id="insertMember">
  	insert into member(id, pw, name, email, contact, address) 
  	values(#{id},#{pw},#{name},#{email},#{contact},#{address})
  </insert>
  
  <!-- 내정보  -->
  <select id="selectProfile" resultType="MemberVO">
  	select * from member 
  	where id=#{id}
  </select>
  
  <!-- 회원정보수정 -->
    <update id="updateProfile">
        UPDATE member
        SET depart_name=#{depart_name},
        position_name=#{position_name},
        email=#{email},
        extension_no=#{extension_no},
        contact=#{contact},
        address=#{address},
        status=#{status} 
        WHERE employee_no=#{employee_no}
     </update>
     
    <resultMap type="com.eatit.memberDomain.MemberVO" id="memberMap">
        <id property="id" column="id"/>
        <result property="id" column="id"/>
        <result property="pw" column="pw"/>
        <result property="name" column="name"/>
        <result property="email" column="email"/>
        <result property="regdate" column="regdate"/>
        <result property="update" column="update"/>
        
        <collection property="authList" resultMap="authMap"></collection>
        
    </resultMap>
    
    <resultMap type="com.eatit.memberDomain.AuthVO" id="authMap">
        <result property="id" column="id"/>
        <result property="auth" column="auth"/>    
    </resultMap>
  
  
  	<select id="getMemberJoin" resultMap="memberMap" >
      	<![CDATA[
		    select m.id, pw, name, email, active, regdate, auth 
			from member m LEFT JOIN member_auth a on m.id=a.id 
			where m.id = #{id};
		]]>   
    </select>
  </mapper>